export type Language = 'en' | 'ta' | 'ml' | 'kn' | 'hi';

export const SUPPORTED_LANGUAGES: Record<Language, string> = {
  en: 'English',
  ta: 'Tamil',
  ml: 'Malayalam',
  kn: 'Kannada',
  hi: 'Hindi',
};

export const translations: Record<Language, Record<string, string>> = {
  en: {
    'app_title': 'Telehealth Insight Companion',
    'upload_report': 'Upload Health Report',
    'choose_file': 'Choose JSON file',
    'uploading': 'Uploading...',
    'upload_success': 'Report uploaded successfully',
    'upload_error': 'Failed to upload report',
    'start_conversation': 'Start Conversation',
    'end_call': 'End Call',
    'connecting': 'Connecting...',
    'connected': 'Connected - Listening',
    'ready': 'Ready',
    'your_message': 'Your message',
    'agent_response': 'Agent response',
    'conversation_ended': 'Conversation ended',
    'generating_summary': 'Generating summary...',
    'summary': 'Session Summary',
    'findings': 'Key Findings',
    'recommendations': 'Recommendations',
    'follow_up': 'Follow-up Actions',
    'send_email': 'Send via Email',
    'download_summary': 'Download Summary',
    'language': 'Language',
    'select_language': 'Select Language',
    'patient_name': 'Patient Name',
    'test_date': 'Test Date',
    'microphone_required': 'Microphone access required',
    'allow_microphone': 'Please allow microphone access to continue',
    'connection_failed': 'Connection failed. Please try again.',
    'error': 'Error',
    'success': 'Success',
    'close': 'Close',
    'back': 'Back',
    'next': 'Next',
    'submit': 'Submit',
    'cancel': 'Cancel',
  },
  ta: {
    'app_title': 'தொலைநோக்கு சுகாதார நுண்ணறிவு உதவி',
    'upload_report': 'சுகாதார அறிக்கை பதிவேற்றவும்',
    'choose_file': 'JSON கோப்பைத் தேர்ந்தெடுக்கவும்',
    'uploading': 'பதிவேற்றுகிறது...',
    'upload_success': 'அறிக்கை வெற்றிகரமாக பதிவேற்றப்பட்டது',
    'upload_error': 'அறிக்கை பதிவேற்ற முடியவில்லை',
    'start_conversation': 'உரையாடல் தொடங்கவும்',
    'end_call': 'அழைப்பை முடிக்கவும்',
    'connecting': 'இணைக்கிறது...',
    'connected': 'இணைக்கப்பட்டது - கேட்கிறது',
    'ready': 'தயாரமாக உள்ளது',
    'your_message': 'உங்கள் செய்தி',
    'agent_response': 'முகவர் பதில்',
    'conversation_ended': 'உரையாடல் முடிந்துவிட்டது',
    'generating_summary': 'சுருக்கம் உருவாக்கப்படுகிறது...',
    'summary': 'அமர்வு சுருக்கம்',
    'findings': 'முக்கிய கண்டுபிடிப்புகள்',
    'recommendations': 'பரிந்துரைகள்',
    'follow_up': 'பின்தொடர்தல் நடவடிக்கைகள்',
    'send_email': 'மின்னஞ்சல் மூலம் அனுப்பவும்',
    'download_summary': 'சுருக்கம் பதிவிறக்கவும்',
    'language': 'மொழி',
    'select_language': 'மொழியைத் தேர்ந்தெடுக்கவும்',
    'patient_name': 'நோயாளியின் பெயர்',
    'test_date': 'சோதனை தேதி',
    'microphone_required': 'மைக்ரோஃபோன் அணுகல் தேவை',
    'allow_microphone': 'தொடர்ந்து செல்ல மைக்ரோஃபோன் அணுகலை அனுமதிக்கவும்',
    'connection_failed': 'இணைப்பு தோல்வியுற்றது. மீண்டும் முயற்சிக்கவும்.',
    'error': 'பிழை',
    'success': 'வெற்றி',
    'close': 'மூடவும்',
    'back': 'பின்னால்',
    'next': 'அடுத்து',
    'submit': 'சமர்ப்பிக்கவும்',
    'cancel': 'ரத்து செய்யவும்',
  },
  ml: {
    'app_title': 'ടെലിഹെൽത്ത് ഇൻസൈറ്റ് കമ്പാനിയൻ',
    'upload_report': 'ആരോഗ്യ റിപ്പോർട്ട് അപ്‌ലോഡ് ചെയ്യുക',
    'choose_file': 'JSON ഫയൽ തിരഞ്ഞെടുക്കുക',
    'uploading': 'അപ്‌ലോഡ് ചെയ്യുന്നു...',
    'upload_success': 'റിപ്പോർട്ട് വിജയകരമായി അപ്‌ലോഡ് ചെയ്യപ്പെട്ടു',
    'upload_error': 'റിപ്പോർട്ട് അപ്‌ലോഡ് ചെയ്യാൻ കഴിഞ്ഞില്ല',
    'start_conversation': 'സംഭാഷണം ആരംഭിക്കുക',
    'end_call': 'കോൾ അവസാനിപ്പിക്കുക',
    'connecting': 'കണക്ട് ചെയ്യുന്നു...',
    'connected': 'കണക്ട് ചെയ്തു - കേൾക്കുന്നു',
    'ready': 'തയ്യാറാണ്',
    'your_message': 'നിങ്ങളുടെ സന്ദേശം',
    'agent_response': 'ഏജന്റ് പ്രതികരണം',
    'conversation_ended': 'സംഭാഷണം അവസാനിച്ചു',
    'generating_summary': 'സംഗ്രഹം സൃഷ്ടിക്കുന്നു...',
    'summary': 'സെഷൻ സംഗ്രഹം',
    'findings': 'പ്രധാന കണ്ടെത്തലുകൾ',
    'recommendations': 'ശുപാർശകൾ',
    'follow_up': 'ഫോളോ-അപ്പ് നടപടികൾ',
    'send_email': 'ഇമെയിൽ വഴി അയയ്ക്കുക',
    'download_summary': 'സംഗ്രഹം ഡൗൺലോഡ് ചെയ്യുക',
    'language': 'ഭാഷ',
    'select_language': 'ഭാഷ തിരഞ്ഞെടുക്കുക',
    'patient_name': 'രോഗിയുടെ പേര്',
    'test_date': 'പരിശോധന തീയതി',
    'microphone_required': 'മൈക്രോഫോൺ ആക്സസ് ആവശ്യമാണ്',
    'allow_microphone': 'തുടരുന്നതിന് മൈക്രോഫോൺ ആക്സസ് അനുവദിക്കുക',
    'connection_failed': 'കണക്ഷൻ പരാജയപ്പെട്ടു. വീണ്ടും ശ്രമിക്കുക.',
    'error': 'പിശക്',
    'success': 'വിജയം',
    'close': 'അടയ്ക്കുക',
    'back': 'തിരികെ',
    'next': 'അടുത്തത്',
    'submit': 'സമർപ്പിക്കുക',
    'cancel': 'റദ്ദാക്കുക',
  },
  kn: {
    'app_title': 'ದೂರವಾಣಿ ಆರೋಗ್ಯ ಒಳನೋಟ ಸಹಾಯಕ',
    'upload_report': 'ಆರೋಗ್ಯ ವರದಿ ಅಪ್‌ಲೋಡ್ ಮಾಡಿ',
    'choose_file': 'JSON ಫೈಲ್ ಆಯ್ಕೆ ಮಾಡಿ',
    'uploading': 'ಅಪ್‌ಲೋಡ್ ಮಾಡುತ್ತಿದೆ...',
    'upload_success': 'ವರದಿ ಯಶಸ್ವಿಯಾಗಿ ಅಪ್‌ಲೋಡ್ ಆಯಿತು',
    'upload_error': 'ವರದಿ ಅಪ್‌ಲೋಡ್ ಮಾಡಲು ವಿಫಲವಾಯಿತು',
    'start_conversation': 'ಸಂವಾದ ಪ್ರಾರಂಭಿಸಿ',
    'end_call': 'ಕರೆ ಮುಕ್ತಾಯ ಮಾಡಿ',
    'connecting': 'ಸಂಪರ್ಕ ಸಾಧಿಸುತ್ತಿದೆ...',
    'connected': 'ಸಂಪರ್ಕ ಸಾಧಿಸಲಾಗಿದೆ - ಕೇಳುತ್ತಿದೆ',
    'ready': 'ಸಿದ್ಧವಾಗಿದೆ',
    'your_message': 'ನಿಮ್ಮ ಸಂದೇಶ',
    'agent_response': 'ಏಜೆಂಟ್ ಪ್ರತಿಕ್ರಿಯೆ',
    'conversation_ended': 'ಸಂವಾದ ಮುಕ್ತಾಯವಾಯಿತು',
    'generating_summary': 'ಸಾರಾಂಶ ರಚಿಸುತ್ತಿದೆ...',
    'summary': 'ಸೆಷನ್ ಸಾರಾಂಶ',
    'findings': 'ಪ್ರಮುಖ ಸಂಶೋಧನೆಗಳು',
    'recommendations': 'ಶಿಫಾರಸುಗಳು',
    'follow_up': 'ಅನುಸರಣ ಕ್ರಿಯೆಗಳು',
    'send_email': 'ಇಮೇಲ್ ಮೂಲಕ ಕಳುಹಿಸಿ',
    'download_summary': 'ಸಾರಾಂಶ ಡೌನ್‌ಲೋಡ್ ಮಾಡಿ',
    'language': 'ಭಾಷೆ',
    'select_language': 'ಭಾಷೆ ಆಯ್ಕೆ ಮಾಡಿ',
    'patient_name': 'ರೋಗಿಯ ಹೆಸರು',
    'test_date': 'ಪರೀಕ್ಷೆಯ ದಿನಾಂಕ',
    'microphone_required': 'ಮೈಕ್ರೋಫೋನ್ ಪ್ರವೇಶ ಅಗತ್ಯವಾಗಿದೆ',
    'allow_microphone': 'ಮುಂದುವರಿಯಲು ಮೈಕ್ರೋಫೋನ್ ಪ್ರವೇಶ ಅನುಮತಿಸಿ',
    'connection_failed': 'ಸಂಪರ್ಕ ವಿಫಲವಾಯಿತು. ಮತ್ತೆ ಪ್ರಯತ್ನಿಸಿ.',
    'error': 'ದೋಷ',
    'success': 'ಯಶಸ್ಸು',
    'close': 'ಮುಚ್ಚಿ',
    'back': 'ಹಿಂದೆ',
    'next': 'ಮುಂದೆ',
    'submit': 'ಸಲ್ಲಿಸಿ',
    'cancel': 'ರದ್ದುಮಾಡಿ',
  },
  hi: {
    'app_title': 'टेलीहेल्थ इनसाइट सहायक',
    'upload_report': 'स्वास्थ्य रिपोर्ट अपलोड करें',
    'choose_file': 'JSON फाइल चुनें',
    'uploading': 'अपलोड किया जा रहा है...',
    'upload_success': 'रिपोर्ट सफलतापूर्वक अपलोड हो गई',
    'upload_error': 'रिपोर्ट अपलोड करने में विफल',
    'start_conversation': 'बातचीत शुरू करें',
    'end_call': 'कॉल समाप्त करें',
    'connecting': 'कनेक्ट किया जा रहा है...',
    'connected': 'कनेक्ट किया गया - सुन रहे हैं',
    'ready': 'तैयार',
    'your_message': 'आपका संदेश',
    'agent_response': 'एजेंट प्रतिक्रिया',
    'conversation_ended': 'बातचीत समाप्त हो गई',
    'generating_summary': 'सारांश तैयार किया जा रहा है...',
    'summary': 'सेशन सारांश',
    'findings': 'मुख्य निष्कर्ष',
    'recommendations': 'सिफारिशें',
    'follow_up': 'अनुवर्ती कार्रवाई',
    'send_email': 'ईमेल के माध्यम से भेजें',
    'download_summary': 'सारांश डाउनलोड करें',
    'language': 'भाषा',
    'select_language': 'भाषा चुनें',
    'patient_name': 'रोगी का नाम',
    'test_date': 'परीक्षण तिथि',
    'microphone_required': 'माइक्रोफोन एक्सेस आवश्यक है',
    'allow_microphone': 'जारी रखने के लिए माइक्रोफोन एक्सेस की अनुमति दें',
    'connection_failed': 'कनेक्शन विफल। कृपया पुनः प्रयास करें।',
    'error': 'त्रुटि',
    'success': 'सफलता',
    'close': 'बंद करें',
    'back': 'वापस',
    'next': 'अगला',
    'submit': 'जमा करें',
    'cancel': 'रद्द करें',
  },
};

export function getTranslation(language: Language, key: string): string {
  return translations[language]?.[key] || translations.en[key] || key;
}

export function detectLanguage(text: string): Language {
  const tamilChars = /[\u0B80-\u0BFF]/g;
  const malayalamChars = /[\u0D00-\u0D7F]/g;
  const kannadaChars = /[\u0C80-\u0CFF]/g;
  const hindiChars = /[\u0900-\u097F]/g;

  const tamilMatch = text.match(tamilChars);
  const malayalamMatch = text.match(malayalamChars);
  const kannadaMatch = text.match(kannadaChars);
  const hindiMatch = text.match(hindiChars);

  if (tamilMatch && tamilMatch.length > 0) return 'ta';
  if (malayalamMatch && malayalamMatch.length > 0) return 'ml';
  if (kannadaMatch && kannadaMatch.length > 0) return 'kn';
  if (hindiMatch && hindiMatch.length > 0) return 'hi';

  return 'en';
}
